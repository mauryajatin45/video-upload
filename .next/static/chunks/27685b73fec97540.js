(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79320,e=>{"use strict";var a=e.i(19628),l=e.i(4250);function s(){let[e,s]=(0,l.useState)(""),[r,t]=(0,l.useState)(null),[o,i]=(0,l.useState)(null),[n,d]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!1),[p,m]=(0,l.useState)(0),[v,h]=(0,l.useState)(null),y=(0,l.useRef)(null),x=(0,l.useCallback)(async e=>["video/mp4","video/quicktime"].includes(e.type)?null:"Please upload an MP4 or MOV file",[]),f=(0,l.useCallback)(async e=>{h(null);let a=await x(e);a?h({type:"error",text:a}):(t(e),i(URL.createObjectURL(e)))},[x]),g=(0,l.useCallback)(e=>{e.preventDefault(),d(!1);let a=e.dataTransfer.files[0];a&&f(a)},[f]),j=(0,l.useCallback)(e=>{e.preventDefault(),d(!0)},[]),b=(0,l.useCallback)(e=>{e.preventDefault(),d(!1)},[]),N=(0,l.useCallback)(()=>{t(null),o&&(URL.revokeObjectURL(o),i(null)),y.current&&(y.current.value="")},[o]),k=async a=>{if(a.preventDefault(),!e||!r)return void h({type:"error",text:"Please enter your email and select a video"});if(!e.includes("@"))return void h({type:"error",text:"Please enter a valid email address"});u(!0),m(0),h(null);let l=new FormData;l.append("email",e),l.append("video",r);try{let e=new XMLHttpRequest;e.upload.addEventListener("progress",e=>{if(e.lengthComputable){let a=Math.round(e.loaded/e.total*100);m(a)}}),e.onload=()=>{u(!1);try{let a=JSON.parse(e.responseText);200===e.status&&a.success?(h({type:"success",text:a.message||"Video uploaded successfully! Thank you for sharing your KYST moment."}),s(""),N()):h({type:"error",text:a.error||"Upload failed. Please try again."})}catch{h({type:"error",text:"Upload failed. Please try again."})}},e.onerror=()=>{u(!1),h({type:"error",text:"Network error. Please check your connection."})},e.open("POST","/api/upload"),e.send(l)}catch{u(!1),h({type:"error",text:"Upload failed. Please try again."})}};return(0,a.jsx)("div",{className:"upload-container",children:(0,a.jsxs)("div",{className:"upload-card",children:[(0,a.jsxs)("form",{onSubmit:k,children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"email",className:"form-label",children:"Your Email"}),(0,a.jsx)("input",{type:"email",id:"email",className:"form-input",placeholder:"you@example.com",value:e,onChange:e=>s(e.target.value),disabled:c,required:!0})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Your Video"}),r?(0,a.jsxs)("div",{className:"video-preview",children:[o&&(0,a.jsx)("video",{src:o,controls:!0,playsInline:!0}),(0,a.jsxs)("div",{className:"video-info",children:[(0,a.jsx)("span",{className:"video-name",children:r.name}),(0,a.jsx)("button",{type:"button",className:"video-remove",onClick:N,children:"Remove"})]})]}):(0,a.jsxs)("div",{className:`drop-zone ${n?"dragging":""}`,onDrop:g,onDragOver:j,onDragLeave:b,onClick:()=>y.current?.click(),children:[(0,a.jsx)("div",{className:"drop-zone-icon",children:"ðŸŽ¬"}),(0,a.jsx)("p",{className:"drop-zone-text",children:"Tap to select or drag your video here"}),(0,a.jsx)("p",{className:"drop-zone-hint",children:"MP4 or MOV format"})]}),(0,a.jsx)("input",{ref:y,type:"file",accept:"video/mp4,video/quicktime",onChange:e=>e.target.files?.[0]&&f(e.target.files[0]),style:{display:"none"}})]}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:!e||!r||c,children:c?"Uploading...":"Upload Your Video"}),c&&(0,a.jsxs)("div",{className:"progress-container",children:[(0,a.jsx)("div",{className:"progress-bar",children:(0,a.jsx)("div",{className:"progress-fill",style:{width:`${p}%`}})}),(0,a.jsxs)("p",{className:"progress-text",children:[p,"% uploaded"]})]}),v&&(0,a.jsx)("div",{className:`message ${v.type}`,children:v.text})]}),(0,a.jsx)("p",{className:"footer-note",children:"By uploading, you agree that William & Flo Gift may repost your video (with credit)."})]})})}e.s(["default",()=>s])}]);