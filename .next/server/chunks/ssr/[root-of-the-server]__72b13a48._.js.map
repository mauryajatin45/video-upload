{"version":3,"sources":["../../../../../video-upload/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../video-upload/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../video-upload/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../video-upload/src/app/upload/page.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","'use client';\n\nimport { useState, useRef, useCallback } from 'react';\n\nexport default function UploadPage() {\n  const [email, setEmail] = useState('');\n  const [video, setVideo] = useState<File | null>(null);\n  const [videoUrl, setVideoUrl] = useState<string | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\n  \n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const validateVideo = useCallback(async (file: File): Promise<string | null> => {\n    // Only check file type - no size or duration limits\n    if (!['video/mp4', 'video/quicktime'].includes(file.type)) {\n      return 'Please upload an MP4 or MOV file';\n    }\n    return null;\n  }, []);\n\n  const handleFileSelect = useCallback(async (file: File) => {\n    setMessage(null);\n    \n    const error = await validateVideo(file);\n    if (error) {\n      setMessage({ type: 'error', text: error });\n      return;\n    }\n\n    setVideo(file);\n    setVideoUrl(URL.createObjectURL(file));\n  }, [validateVideo]);\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n    \n    const file = e.dataTransfer.files[0];\n    if (file) {\n      handleFileSelect(file);\n    }\n  }, [handleFileSelect]);\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n  }, []);\n\n  const removeVideo = useCallback(() => {\n    setVideo(null);\n    if (videoUrl) {\n      URL.revokeObjectURL(videoUrl);\n      setVideoUrl(null);\n    }\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  }, [videoUrl]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!email || !video) {\n      setMessage({ type: 'error', text: 'Please enter your email and select a video' });\n      return;\n    }\n\n    if (!email.includes('@')) {\n      setMessage({ type: 'error', text: 'Please enter a valid email address' });\n      return;\n    }\n\n    setIsUploading(true);\n    setUploadProgress(0);\n    setMessage(null);\n\n    const formData = new FormData();\n    formData.append('email', email);\n    formData.append('video', video);\n\n    try {\n      const xhr = new XMLHttpRequest();\n      \n      xhr.upload.addEventListener('progress', (e) => {\n        if (e.lengthComputable) {\n          const progress = Math.round((e.loaded / e.total) * 100);\n          setUploadProgress(progress);\n        }\n      });\n\n      xhr.onload = () => {\n        setIsUploading(false);\n        \n        try {\n          const response = JSON.parse(xhr.responseText);\n          \n          if (xhr.status === 200 && response.success) {\n            setMessage({ type: 'success', text: response.message || 'Video uploaded successfully! Thank you for sharing your KYST moment.' });\n            setEmail('');\n            removeVideo();\n          } else {\n            setMessage({ type: 'error', text: response.error || 'Upload failed. Please try again.' });\n          }\n        } catch {\n          setMessage({ type: 'error', text: 'Upload failed. Please try again.' });\n        }\n      };\n\n      xhr.onerror = () => {\n        setIsUploading(false);\n        setMessage({ type: 'error', text: 'Network error. Please check your connection.' });\n      };\n\n      xhr.open('POST', '/api/upload');\n      xhr.send(formData);\n    } catch {\n      setIsUploading(false);\n      setMessage({ type: 'error', text: 'Upload failed. Please try again.' });\n    }\n  };\n\n  return (\n    <div className=\"upload-container\">\n      <div className=\"upload-card\">\n        {/* <h1 className=\"upload-title\">Share Your KYST Moment</h1>\n        <p className=\"upload-subtitle\">\n          Upload your reaction video â€” gift opening, happy tears, bridesmaid chaosâ€¦ anything.\n        </p> */}\n\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"email\" className=\"form-label\">Your Email</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              className=\"form-input\"\n              placeholder=\"you@example.com\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              disabled={isUploading}\n              required\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"form-label\">Your Video</label>\n            \n            {!video ? (\n              <div\n                className={`drop-zone ${isDragging ? 'dragging' : ''}`}\n                onDrop={handleDrop}\n                onDragOver={handleDragOver}\n                onDragLeave={handleDragLeave}\n                onClick={() => fileInputRef.current?.click()}\n              >\n                <div className=\"drop-zone-icon\">ðŸŽ¬</div>\n                <p className=\"drop-zone-text\">Tap to select or drag your video here</p>\n                <p className=\"drop-zone-hint\">MP4 or MOV format</p>\n              </div>\n            ) : (\n              <div className=\"video-preview\">\n                {videoUrl && (\n                  <video src={videoUrl} controls playsInline />\n                )}\n                <div className=\"video-info\">\n                  <span className=\"video-name\">{video.name}</span>\n                  <button type=\"button\" className=\"video-remove\" onClick={removeVideo}>\n                    Remove\n                  </button>\n                </div>\n              </div>\n            )}\n            \n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\"video/mp4,video/quicktime\"\n              onChange={(e) => e.target.files?.[0] && handleFileSelect(e.target.files[0])}\n              style={{ display: 'none' }}\n            />\n          </div>\n\n          <button\n            type=\"submit\"\n            className=\"btn btn-primary\"\n            disabled={!email || !video || isUploading}\n          >\n            {isUploading ? 'Uploading...' : 'Upload Your Video'}\n          </button>\n\n          {isUploading && (\n            <div className=\"progress-container\">\n              <div className=\"progress-bar\">\n                <div \n                  className=\"progress-fill\" \n                  style={{ width: `${uploadProgress}%` }}\n                />\n              </div>\n              <p className=\"progress-text\">{uploadProgress}% uploaded</p>\n            </div>\n          )}\n\n          {message && (\n            <div className={`message ${message.type}`}>\n              {message.text}\n            </div>\n          )}\n        </form>\n\n        <p className=\"footer-note\">\n          By uploading, you agree that William &amp; Flo Gift may repost your video (with credit).\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}