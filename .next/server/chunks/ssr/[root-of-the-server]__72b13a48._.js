module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56150,(a,b,c)=>{"use strict";b.exports=a.r(18622)},98675,(a,b,c)=>{"use strict";b.exports=a.r(56150).vendored["react-ssr"].ReactJsxRuntime},37971,(a,b,c)=>{"use strict";b.exports=a.r(56150).vendored["react-ssr"].React},92917,a=>{"use strict";var b=a.i(98675),c=a.i(37971);function d(){let[a,d]=(0,c.useState)(""),[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(0),[o,p]=(0,c.useState)(null),q=(0,c.useRef)(null),r=(0,c.useCallback)(async a=>["video/mp4","video/quicktime"].includes(a.type)?null:"Please upload an MP4 or MOV file",[]),s=(0,c.useCallback)(async a=>{p(null);let b=await r(a);b?p({type:"error",text:b}):(f(a),h(URL.createObjectURL(a)))},[r]),t=(0,c.useCallback)(a=>{a.preventDefault(),j(!1);let b=a.dataTransfer.files[0];b&&s(b)},[s]),u=(0,c.useCallback)(a=>{a.preventDefault(),j(!0)},[]),v=(0,c.useCallback)(a=>{a.preventDefault(),j(!1)},[]),w=(0,c.useCallback)(()=>{f(null),g&&(URL.revokeObjectURL(g),h(null)),q.current&&(q.current.value="")},[g]),x=async b=>{if(b.preventDefault(),!a||!e)return void p({type:"error",text:"Please enter your email and select a video"});if(!a.includes("@"))return void p({type:"error",text:"Please enter a valid email address"});l(!0),n(0),p(null);let c=new FormData;c.append("email",a),c.append("video",e);try{let a=new XMLHttpRequest;a.upload.addEventListener("progress",a=>{if(a.lengthComputable){let b=Math.round(a.loaded/a.total*100);n(b)}}),a.onload=()=>{l(!1);try{let b=JSON.parse(a.responseText);200===a.status&&b.success?(p({type:"success",text:b.message||"Video uploaded successfully! Thank you for sharing your KYST moment."}),d(""),w()):p({type:"error",text:b.error||"Upload failed. Please try again."})}catch{p({type:"error",text:"Upload failed. Please try again."})}},a.onerror=()=>{l(!1),p({type:"error",text:"Network error. Please check your connection."})},a.open("POST","/api/upload"),a.send(c)}catch{l(!1),p({type:"error",text:"Upload failed. Please try again."})}};return(0,b.jsx)("div",{className:"upload-container",children:(0,b.jsxs)("div",{className:"upload-card",children:[(0,b.jsxs)("form",{onSubmit:x,children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"email",className:"form-label",children:"Your Email"}),(0,b.jsx)("input",{type:"email",id:"email",className:"form-input",placeholder:"you@example.com",value:a,onChange:a=>d(a.target.value),disabled:k,required:!0})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"Your Video"}),e?(0,b.jsxs)("div",{className:"video-preview",children:[g&&(0,b.jsx)("video",{src:g,controls:!0,playsInline:!0}),(0,b.jsxs)("div",{className:"video-info",children:[(0,b.jsx)("span",{className:"video-name",children:e.name}),(0,b.jsx)("button",{type:"button",className:"video-remove",onClick:w,children:"Remove"})]})]}):(0,b.jsxs)("div",{className:`drop-zone ${i?"dragging":""}`,onDrop:t,onDragOver:u,onDragLeave:v,onClick:()=>q.current?.click(),children:[(0,b.jsx)("div",{className:"drop-zone-icon",children:"ðŸŽ¬"}),(0,b.jsx)("p",{className:"drop-zone-text",children:"Tap to select or drag your video here"}),(0,b.jsx)("p",{className:"drop-zone-hint",children:"MP4 or MOV format"})]}),(0,b.jsx)("input",{ref:q,type:"file",accept:"video/mp4,video/quicktime",onChange:a=>a.target.files?.[0]&&s(a.target.files[0]),style:{display:"none"}})]}),(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:!a||!e||k,children:k?"Uploading...":"Upload Your Video"}),k&&(0,b.jsxs)("div",{className:"progress-container",children:[(0,b.jsx)("div",{className:"progress-bar",children:(0,b.jsx)("div",{className:"progress-fill",style:{width:`${m}%`}})}),(0,b.jsxs)("p",{className:"progress-text",children:[m,"% uploaded"]})]}),o&&(0,b.jsx)("div",{className:`message ${o.type}`,children:o.text})]}),(0,b.jsx)("p",{className:"footer-note",children:"By uploading, you agree that William & Flo Gift may repost your video (with credit)."})]})})}a.s(["default",()=>d])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__72b13a48._.js.map